// Professional Testimonial Component
// ===================================

.Testimonial {
  background: $ColorWarmWhite;
  border: 1px solid $ColorConcreteLight;
  border-radius: map-get($BorderRadius, 'md');
  padding: map-get($ComponentSpacing, 'card-padding');
  margin: 0;
  position: relative;
  box-shadow: map-get($BoxShadow, 'subtle');
  transition: map-get($Transition, 'medium');
  
  &:hover {
    box-shadow: map-get($BoxShadow, 'soft');
    transform: translateY(-1px);
  }
  
  // Quote section
  &__Quote {
    position: relative;
    margin-bottom: map-get($ComponentSpacing, 'card-content-gap');
    
    &--featured {
      text-align: center;
      margin-bottom: map-get($Scale, 'xl');
    }
  }
  
  &__QuoteIcon {
    position: absolute;
    top: -#{map-get($Scale, 'sm')};
    left: -#{map-get($Scale, 'xs')};
    color: map-get($AccentColors, 'gold');
    opacity: 0.3;
    
    .material-symbols-outlined {
      font-size: map-get($Scale, 'xl');
      transform: scaleX(-1); // Flip quote icon
    }
    
    .Testimonial--featured & {
      position: static;
      margin-bottom: map-get($Scale, 'lg');
      opacity: 0.2;
      
      .material-symbols-outlined {
        font-size: map-get($Scale, 'xxl');
      }
    }
  }
  
  &__Text {
    font-size: map-get($FontSizes, 'lead');
    line-height: map-get($LineHeight, 'relaxed');
    color: $ColorCharcoal;
    font-style: italic;
    
    p {
      margin: 0;
      position: relative;
      z-index: 1;
    }
    
    .Testimonial--featured & {
      font-size: map-get($FontSizes, 'h4');
      font-weight: map-get($FontWeight, 'medium');
    }
    
    .Testimonial--compact & {
      font-size: map-get($FontSizes, 'body');
    }
  }
  
  // Attribution section
  &__Attribution {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: map-get($Scale, 'base');
    
    &--featured {
      justify-content: center;
      flex-direction: column;
      gap: map-get($Scale, 'lg');
      text-align: center;
    }
  }
  
  &__AuthorSection {
    display: flex;
    align-items: center;
    gap: map-get($Scale, 'base');
  }
  
  &__Avatar {
    width: map-get($Scale, 'xxl');
    height: map-get($Scale, 'xxl');
    border-radius: 50%;
    overflow: hidden;
    background: $ColorCoolGray;
    flex-shrink: 0;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    &--placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, $ColorConcrete, $ColorConcreteLight);
    }
    
    .Testimonial--featured & {
      width: map-get($Scale, 'xxxl');
      height: map-get($Scale, 'xxxl');
    }
    
    .Testimonial--compact & {
      width: map-get($Scale, 'xl');
      height: map-get($Scale, 'xl');
    }
  }
  
  &__Avatar__Initial {
    color: $ColorWhite;
    font-weight: map-get($FontWeight, 'bold');
    font-size: map-get($FontSizes, 'lead');
    
    .Testimonial--featured & {
      font-size: map-get($FontSizes, 'h3');
    }
    
    .Testimonial--compact & {
      font-size: map-get($FontSizes, 'body');
    }
  }
  
  &__AuthorInfo {
    min-width: 0; // Allow text to wrap
  }
  
  &__Author {
    display: block;
    font-size: map-get($FontSizes, 'body');
    font-weight: map-get($FontWeight, 'semibold');
    color: $ColorCharcoal;
    font-style: normal;
    line-height: map-get($LineHeight, 'tight');
    margin-bottom: map-get($Scale, 'xs');
    
    .Testimonial--featured & {
      font-size: map-get($FontSizes, 'lead');
      margin-bottom: map-get($Scale, 'sm');
    }
    
    .Testimonial--compact & {
      font-size: map-get($FontSizes, 'small');
      margin-bottom: 2px;
    }
  }
  
  &__Role {
    font-size: map-get($FontSizes, 'small');
    color: $ColorConcrete;
    line-height: map-get($LineHeight, 'tight');
    
    .Testimonial--compact & {
      font-size: map-get($FontSizes, 'caption');
    }
  }
  
  &__Separator {
    margin: 0 map-get($Scale, 'xs');
    opacity: 0.5;
  }
  
  // Star rating system
  &__Rating {
    display: flex;
    gap: 2px;
    align-items: center;
    
    .Testimonial--featured & {
      justify-content: center;
      margin-top: map-get($Scale, 'sm');
    }
  }
  
  &__Star {
    display: flex;
    align-items: center;
    
    .material-symbols-outlined {
      font-size: map-get($Scale, 'base');
      transition: map-get($Transition, 'fast');
    }
    
    &--filled .material-symbols-outlined {
      color: map-get($AccentColors, 'gold');
    }
    
    &--empty .material-symbols-outlined {
      color: $ColorConcreteLight;
    }
    
    .Testimonial--compact & .material-symbols-outlined {
      font-size: map-get($Scale, 'sm');
    }
  }
  
  // Layout variants
  &--featured {
    background: linear-gradient(135deg, $ColorWarmWhite 0%, $ColorCoolGray 100%);
    border: 2px solid map-get($AccentColors, 'gold');
    padding: map-get($Scale, 'xl');
    text-align: center;
    
    @include Respond('medium') {
      padding: map-get($Scale, 'xxl');
    }
    
    &:hover {
      border-color: darken(map-get($AccentColors, 'gold'), 10%);
      box-shadow: map-get($BoxShadow, 'medium');
    }
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, 
        map-get($AccentColors, 'gold'), 
        lighten(map-get($AccentColors, 'gold'), 20%), 
        map-get($AccentColors, 'gold')
      );
    }
  }
  
  &--compact {
    padding: map-get($ComponentSpacing, 'form-field-gap');
    
    .Testimonial__Quote {
      margin-bottom: map-get($Scale, 'sm');
    }
    
    .Testimonial__Attribution {
      gap: map-get($Scale, 'sm');
    }
  }
}

// Testimonial grid layouts
.Testimonials-Grid {
  display: grid;
  gap: map-get($ComponentSpacing, 'card-gap');
  
  &--single {
    max-width: 800px;
    margin: 0 auto;
  }
  
  &--double {
    @include Respond('medium') {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  &--triple {
    @include Respond('medium') {
      grid-template-columns: repeat(2, 1fr);
    }
    
    @include Respond('large') {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  &--masonry {
    @include Respond('medium') {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      grid-auto-rows: min-content;
    }
  }
}

// Featured testimonial in hero sections
.Hero-Testimonial {
  margin-top: map-get($ComponentSpacing, 'section-gap');
  
  .Testimonial {
    background: rgba($ColorWarmWhite, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba($ColorConcrete, 0.2);
  }
}